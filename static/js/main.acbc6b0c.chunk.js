(this["webpackJsonpredux-paint"]=this["webpackJsonpredux-paint"]||[]).push([[0],{42:function(e,t,n){e.exports=n(52)},52:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),u=n(15),s=n(72),i=n(74),l=n(75),p=n(76),d=n(78),f=n(77),y=n(79),h=n(36),m=function(e){return{type:"op/opSetType",payload:{type:e}}},v=n(25),b=n(31);var g=Object(u.b)((function(e){return e}),null)((function(e){var t=e.history,n=e.dispatch,o=e.type,c=e.strokeStyle,u=Object(a.useState)({mouseDown:!1}),s=Object(h.a)(u,2),i=s[0],l=s[1],p=function(e,t,a){switch(a.type){case"mousedown":return l({mouseDown:!0}),n(function(e,t,n,a){return{type:"op/create",payload:{type:e,strokeStyle:t,x:n,y:a}}}(e,t,a.pageX-f.current.offsetLeft,a.pageY-f.current.offsetTop));case"mousemove":return i.mouseDown?n((r=a.pageX-f.current.offsetLeft,o=a.pageY-f.current.offsetTop,{type:"op/update",payload:{x:r,y:o}})):void 0;case"mouseup":return l({mouseDown:!1});default:throw new Error("unknown event.type: ",a.type)}var r,o},d=function(e){switch(o){case"gesture":case"rect":return p(o,c,e);default:throw new Error("unknown op.type: ",o)}},f=Object(a.useRef)(null);return Object(a.useEffect)((function(){!function(e){e.current.width=parseInt(getComputedStyle(e.current.parentNode).getPropertyValue("width")),e.current.height=parseInt(getComputedStyle(e.current.parentNode).getPropertyValue("height"))}(f)})),Object(a.useEffect)((function(){!function(e,t){e.current.width=e.current.width;var n,a=e.current.getContext("2d"),r=Object(b.a)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,c=o[0],u=c.type,s=c.strokeStyle,i=c.x,l=c.y;switch(a.strokeStyle=s,a.fillStyle=s,u){case"rect":var p=o.slice().reverse(),d=Object(v.a)(p),f=d[0],y=f.x,h=f.y;d.slice(1);a.beginPath(),a.fillRect(i,l,-1*(i-y),-1*(l-h)),a.stroke();break;case"gesture":a.beginPath(),a.moveTo(i,l);var m,g=Object(b.a)(o);try{for(g.s();!(m=g.n()).done;){var w=m.value,j=w.x,O=w.y;a.lineTo(j,O),a.stroke()}}catch(E){g.e(E)}finally{g.f()}break;default:throw new Error("unknown op: ",o)}}}catch(E){r.e(E)}finally{r.f()}}(f,t)})),r.a.createElement("canvas",{ref:f,onMouseUp:d,onMouseMove:d,onMouseDown:d})})),w=Object(s.a)((function(e){return{title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(12),paddingBottom:e.spacing(8)},canvas:{height:"70vh"}}}));var j=Object(u.b)((function(e){return e}),null)((function(e){var t=e.history,n=e.future,a=e.type,o=e.dispatch,c=w();return r.a.createElement("div",null,r.a.createElement(i.a,{position:"relative"},r.a.createElement(l.a,null,r.a.createElement(p.a,{variant:"h6",className:c.title},"Redux Paint"),r.a.createElement(y.a,{variant:"contained",color:"gesture"===a?"secondary":"default",className:c.menuButton,onClick:function(){return o(m("gesture"))}},"Gesture"),r.a.createElement(y.a,{variant:"contained",color:"rect"===a?"secondary":"default",className:c.menuButton,onClick:function(){return o(m("rect"))}},"Rect"),r.a.createElement(y.a,{variant:"contained",className:c.menuButton,disabled:0===t.length,onClick:function(){o({type:"undo",payload:{}})}},"Undo"),r.a.createElement(y.a,{variant:"contained",className:c.menuButton,disabled:0===n.length,onClick:function(){o({type:"redo",payload:{}})}},"Redo"))),r.a.createElement("main",{className:c.content},r.a.createElement(f.a,{className:c.container},r.a.createElement(d.a,{className:c.canvas,raised:!0},r.a.createElement(g,null)))))})),O=n(34),E=n(35),k=n(12);var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"gesture",strokeStyle:"#333",history:[],future:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"op/opSetType":return Object(k.a)(Object(k.a)({},e),{},{type:t.payload.type});case"op/create":return Object(k.a)(Object(k.a)({},e),{},{future:[],history:e.history.concat([[t.payload]])});case"op/update":var n=e.history.slice().reverse(),a=Object(v.a)(n),r=a[0],o=a.slice(1);return Object(k.a)(Object(k.a)({},e),{},{future:[],history:[].concat(Object(E.a)(o.slice().reverse()),[r.concat([t.payload])])});case"undo":return Object(k.a)(Object(k.a)({},e),{},{future:e.future.concat(e.history.slice(-1)),history:e.history.slice(0,-1)});case"redo":return Object(k.a)(Object(k.a)({},e),{},{future:e.future.slice(0,-1),history:e.history.slice().concat(e.future.slice(-1))});default:return e}},S=Object(O.a)({reducer:x});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:S},r.a.createElement(j,null))),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.acbc6b0c.chunk.js.map