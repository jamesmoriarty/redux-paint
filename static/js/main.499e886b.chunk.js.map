{"version":3,"sources":["constants.ts","components/Canvas.tsx","components/Canvas/resize.ts","components/Canvas/render.ts","components/ColorPicker.js","App.jsx","reducer.ts","store.ts","index.js"],"names":["OP_TYPES","ACTION_TYPES","OP_TYPE_DEFAULT","OP_TYPE_GESTURE","connect","state","history","dispatch","type","color","useState","mouseDown","setState","handleEvent","event","refCanvas","current","OP_TYPE_RECT","OP_CREATE","payload","x","pageX","offsetLeft","y","pageY","offsetTop","OP_UPDATE","Error","useRef","useEffect","parentNode","width","parseInt","getComputedStyle","getPropertyValue","height","handleResize","ctx","getContext","op","x1","y1","strokeStyle","fillStyle","slice","reverse","x2","y2","beginPath","fillRect","stroke","moveTo","lineTo","handleRender","ref","onMouseUp","onMouseMove","onMouseDown","children","displayColorPicker","React","cloneElement","onClick","style","marginTop","position","zIndex","top","right","bottom","left","onChangeComplete","OP_SET_COLOR","hex","useStyles","makeStyles","theme","title","flexGrow","toolButtonGroup","marginRight","spacing","content","overflow","container","paddingTop","paddingBottom","canvas","future","classes","AppBar","Toolbar","Typography","variant","className","ButtonGroup","Button","OP_SET_TYPE","disabled","length","UNDO","REDO","Container","Card","raised","reduce","action","concat","last","rest","store","configureStore","reducer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.499e886b.chunk.js","sourcesContent":["export interface State {\n  type: OP_TYPES;\n  color: string;\n  history: OpPayload[][];\n  future: OpPayload[][];\n}\n\nexport type OpPayload = OpCreatePayload | OpUpdatePayload;\n\nexport type Action =\n  | UndoAction\n  | RedoAction\n  | OpSetTypeAction\n  | OpSetColorAction\n  | OpCreateAction\n  | OpUpdateAction;\n\nexport enum OP_TYPES {\n  OP_TYPE_GESTURE,\n  OP_TYPE_RECT,\n}\n\nexport const OP_TYPE_DEFAULT = OP_TYPES.OP_TYPE_GESTURE;\nexport const OP_STROKE_STYLE_DEFAULT = \"#333\";\n\nexport type OpCreatePayload = {\n  type: OP_TYPES;\n  color: string;\n  x: number;\n  y: number;\n};\n\nexport type OpUpdatePayload = {\n  x: number;\n  y: number;\n};\n\nexport enum ACTION_TYPES {\n  OP_SET_TYPE,\n  OP_SET_COLOR,\n  OP_CREATE,\n  OP_UPDATE,\n  UNDO,\n  REDO,\n}\n\nexport type UndoAction = {\n  type: ACTION_TYPES.UNDO;\n  payload: {};\n};\n\nexport type RedoAction = {\n  type: ACTION_TYPES.REDO;\n  payload: {};\n};\n\nexport type OpSetTypeAction = {\n  type: ACTION_TYPES.OP_SET_TYPE;\n  payload: {\n    type: OP_TYPES;\n  };\n};\n\nexport type OpSetColorAction = {\n  type: ACTION_TYPES.OP_SET_COLOR;\n  payload: {\n    color: string;\n  };\n};\n\nexport type OpCreateAction = {\n  type: ACTION_TYPES.OP_CREATE;\n  payload: OpCreatePayload;\n};\n\nexport type OpUpdateAction = {\n  type: ACTION_TYPES.OP_UPDATE;\n  payload: OpUpdatePayload;\n};\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { handleRender } from \"./Canvas/render\";\nimport { handleResize } from \"./Canvas/resize\";\nimport { ACTION_TYPES, OP_TYPES, State } from \"../constants\";\n\nfunction Canvas({ history, dispatch, type, color }: any) {\n  const [state, setState] = useState({ mouseDown: false }),\n    handleEvent = (event: any) => {\n      if (refCanvas.current == null) return;\n\n      switch (type) {\n        case OP_TYPES.OP_TYPE_RECT:\n        case OP_TYPES.OP_TYPE_GESTURE:\n          switch (event.type) {\n            case \"mousedown\":\n              setState({ mouseDown: true });\n\n              return dispatch({\n                type: ACTION_TYPES.OP_CREATE,\n                payload: {\n                  type: type,\n                  color: color,\n                  x: event.pageX - refCanvas.current.offsetLeft,\n                  y: event.pageY - refCanvas.current.offsetTop,\n                },\n              });\n            case \"mousemove\":\n              if (state.mouseDown) {\n                return dispatch({\n                  type: ACTION_TYPES.OP_UPDATE,\n                  payload: {\n                    x: event.pageX - refCanvas.current.offsetLeft,\n                    y: event.pageY - refCanvas.current.offsetTop,\n                  },\n                });\n              }\n              return;\n            case \"mouseup\":\n              return setState({ mouseDown: false });\n            default:\n              throw new Error(\"unknown event.type: \" + event.type);\n          }\n        default:\n          throw new Error(\"unknown op.type: \" + type);\n      }\n    };\n\n  let refCanvas = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    handleResize(refCanvas);\n  });\n\n  useEffect(() => {\n    handleRender(refCanvas, history);\n  });\n\n  return (\n    <canvas\n      ref={refCanvas}\n      onMouseUp={handleEvent}\n      onMouseMove={handleEvent}\n      onMouseDown={handleEvent}\n    ></canvas>\n  );\n}\n\nconst mapStateToProps = (state: State) => state;\n\nexport default connect(mapStateToProps, null)(Canvas);\n","export const handleResize = (refCanvas: React.RefObject<HTMLCanvasElement>) => {\n  if (refCanvas.current == null) return;\n\n  const parentNode = refCanvas.current.parentNode as HTMLDivElement;\n\n  refCanvas.current.width = parseInt(\n    getComputedStyle(parentNode).getPropertyValue(\"width\")\n  );\n  refCanvas.current.height = parseInt(\n    getComputedStyle(parentNode).getPropertyValue(\"height\")\n  );\n};\n","import { OpPayload, OpCreatePayload, OP_TYPES } from \"../../constants\";\n\nexport const handleRender = (\n  refCanvas: React.RefObject<HTMLCanvasElement>,\n  history: OpPayload[][]\n) => {\n  if (refCanvas.current == null) return;\n\n  // eslint-disable-next-line\n  refCanvas.current.width = refCanvas.current.width;\n\n  const ctx = refCanvas.current.getContext(\"2d\");\n\n  if (ctx == null) return;\n\n  for (const op of history) {\n    const { type, color, x: x1, y: y1 } = op[0] as OpCreatePayload;\n\n    ctx.strokeStyle = color;\n    ctx.fillStyle = color;\n\n    switch (type) {\n      case OP_TYPES.OP_TYPE_RECT:\n        // eslint-disable-next-line\n        const [{ x: x2, y: y2 }, ...rest] = op.slice().reverse();\n        ctx.beginPath();\n        ctx.fillRect(x1, y1, (x1 - x2) * -1, (y1 - y2) * -1);\n        ctx.stroke();\n        break;\n      case OP_TYPES.OP_TYPE_GESTURE:\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        for (const { x: x2, y: y2 } of op) {\n          ctx.lineTo(x2, y2);\n          ctx.stroke();\n        }\n        break;\n      default:\n        throw new Error(\"unknown op: \" + type);\n    }\n  }\n};\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { ChromePicker } from \"react-color\";\nimport { ACTION_TYPES } from \"../constants\";\n\nfunction ColorPicker({ children, dispatch, color }) {\n  const [state, setState] = useState({ displayColorPicker: false }),\n    handleClose = () => {\n      setState({ displayColorPicker: false });\n    },\n    handleClick = () => {\n      setState({ displayColorPicker: !state.displayColorPicker });\n    },\n    handleChangeComplete = (color) => {\n      dispatch({\n        type: ACTION_TYPES.OP_SET_COLOR,\n        payload: { color: color.hex },\n      });\n    },\n    popover = {\n      marginTop: \"5vh\",\n      position: \"absolute\",\n      zIndex: \"2\",\n    },\n    cover = {\n      position: \"fixed\",\n      top: \"0px\",\n      right: \"0px\",\n      bottom: \"0px\",\n      left: \"0px\",\n    };\n\n  return (\n    <div>\n      {React.cloneElement(children, { onClick: handleClick })}\n      {state.displayColorPicker ? (\n        <div style={popover}>\n          <div style={cover} onClick={handleClose} />\n          <ChromePicker color={color} onChangeComplete={handleChangeComplete} />\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => state;\n\nexport default connect(mapStateToProps, null)(ColorPicker);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Card from \"@material-ui/core/Card\";\nimport Container from \"@material-ui/core/Container\";\nimport Button from \"@material-ui/core/Button\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\nimport RedoIcon from \"@material-ui/icons/Redo\";\nimport GestureIcon from \"@material-ui/icons/Gesture\";\nimport LineIcon from \"@material-ui/icons/Remove\";\nimport RectIcon from \"@material-ui/icons/CheckBoxOutlineBlank\";\nimport ColorIcon from \"@material-ui/icons/Palette\";\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\nimport Canvas from \"./components/Canvas\";\nimport ColorPicker from \"./components/ColorPicker\";\nimport { OP_TYPES, ACTION_TYPES } from \"./constants\";\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    flexGrow: 1,\n  },\n  toolButtonGroup: {\n    marginRight: theme.spacing(2),\n  },\n  content: {\n    flexGrow: 1,\n    height: \"100vh\",\n    overflow: \"auto\",\n  },\n  container: {\n    paddingTop: theme.spacing(12),\n    paddingBottom: theme.spacing(8),\n  },\n  canvas: {\n    height: \"70vh\",\n  },\n}));\n\nfunction App({ history, future, type, dispatch, color }) {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <AppBar position=\"relative\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            Redux Paint\n          </Typography>\n          <ButtonGroup className={classes.toolButtonGroup}>\n            <ColorPicker>\n              <Button variant=\"contained\">\n                <ColorIcon style={{ color: color }} />\n              </Button>\n            </ColorPicker>\n          </ButtonGroup>\n          <ButtonGroup className={classes.toolButtonGroup}>\n            <Button\n              variant=\"contained\"\n              color={\n                type === OP_TYPES.OP_TYPE_GESTURE ? \"secondary\" : \"default\"\n              }\n              onClick={() =>\n                dispatch({\n                  type: ACTION_TYPES.OP_SET_TYPE,\n                  payload: { type: OP_TYPES.OP_TYPE_GESTURE },\n                })\n              }\n            >\n              <GestureIcon />\n            </Button>\n            <Button variant=\"contained\" disabled={true}>\n              <LineIcon />\n            </Button>\n            <Button\n              variant=\"contained\"\n              color={type === OP_TYPES.OP_TYPE_RECT ? \"secondary\" : \"default\"}\n              onClick={() =>\n                dispatch({\n                  type: ACTION_TYPES.OP_SET_TYPE,\n                  payload: { type: OP_TYPES.OP_TYPE_RECT },\n                })\n              }\n            >\n              <RectIcon />\n            </Button>\n          </ButtonGroup>\n          <ButtonGroup className={classes.toolButtonGroup}>\n            <Button\n              variant=\"contained\"\n              disabled={history.length === 0}\n              onClick={() => {\n                dispatch({ type: ACTION_TYPES.UNDO, payload: {} });\n              }}\n            >\n              <UndoIcon />\n            </Button>\n            <Button\n              variant=\"contained\"\n              disabled={future.length === 0}\n              onClick={() => {\n                dispatch({ type: ACTION_TYPES.REDO, payload: {} });\n              }}\n            >\n              <RedoIcon />\n            </Button>\n          </ButtonGroup>\n        </Toolbar>\n      </AppBar>\n      <main className={classes.content}>\n        <Container className={classes.container}>\n          <Card className={classes.canvas} raised={true}>\n            <Canvas />\n          </Card>\n        </Container>\n      </main>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => state;\n\nexport default connect(mapStateToProps, null)(App);\n","import {\n  State,\n  Action,\n  ACTION_TYPES,\n  OP_TYPE_DEFAULT,\n  OP_STROKE_STYLE_DEFAULT,\n} from \"./constants\";\n\nfunction reduce(\n  state: State = {\n    type: OP_TYPE_DEFAULT,\n    color: OP_STROKE_STYLE_DEFAULT,\n    history: [],\n    future: [],\n  },\n  action: Action\n) {\n  switch (action.type) {\n    case ACTION_TYPES.OP_SET_TYPE:\n      return {\n        ...state,\n        type: action.payload.type,\n      };\n    case ACTION_TYPES.OP_SET_COLOR:\n      return {\n        ...state,\n        color: action.payload.color,\n      };\n    case ACTION_TYPES.OP_CREATE:\n      return {\n        ...state,\n        future: [],\n        history: state.history.concat([[action.payload]]),\n      };\n    case ACTION_TYPES.OP_UPDATE:\n      var [last, ...rest] = state.history.slice().reverse();\n      return {\n        ...state,\n        future: [],\n        history: [...rest.slice().reverse(), last.concat([action.payload])],\n      };\n    case ACTION_TYPES.UNDO:\n      return {\n        ...state,\n        future: state.future.concat(state.history.slice(-1)),\n        history: state.history.slice(0, -1),\n      };\n    case ACTION_TYPES.REDO:\n      return {\n        ...state,\n        future: state.future.slice(0, -1),\n        history: state.history.slice().concat(state.future.slice(-1)),\n      };\n    default:\n      return state;\n  }\n}\n\nexport default reduce;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport reduce from \"./reducer\";\n\nconst store = configureStore({ reducer: reduce });\n\n// store.subscribe(() => console.log(store.getState()));\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}