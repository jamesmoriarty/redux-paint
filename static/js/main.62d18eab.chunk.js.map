{"version":3,"sources":["components/Canvas.js","redux/actions.js","redux/actionTypes.js","components/UndoButton.js","components/RedoButton.js","App.js","redux/reduce.js","redux/store.js","index.js"],"names":["connect","state","history","dispatch","useState","mouseDown","setState","handleEvent","event","type","refCanvas","payload","x","pageX","current","offsetLeft","y","pageY","offsetTop","opStart","opContinue","console","log","useRef","useEffect","width","parseInt","getComputedStyle","parentNode","getPropertyValue","height","resize","ctx","getContext","op","beginPath","moveTo","lineTo","stroke","render","ref","onMouseUp","onMouseMove","onMouseDown","className","Button","variant","disabled","length","onClick","future","useStyles","makeStyles","theme","title","flexGrow","menuButton","marginRight","spacing","content","overflow","container","paddingTop","paddingBottom","canvas","App","classes","AppBar","position","Toolbar","Typography","RedoButton","Container","maxWidth","Card","raised","reduce","action","concat","slice","reverse","last","rest","store","configureStore","reducer","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.62d18eab.chunk.js","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { opStart, opContinue } from \"./../redux/actions\";\n\nfunction render(refCanvas, history) {\n  // eslint-disable-next-line\n  refCanvas.current.width = refCanvas.current.width;\n\n  const ctx = refCanvas.current.getContext(\"2d\");\n\n  for (const op of history) {\n    switch (op.type) {\n      case \"line\":\n      default:\n        const { x, y } = op[0];\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        for (const { x, y } of op) {\n          ctx.lineTo(x, y);\n          ctx.stroke();\n        }\n    }\n  }\n}\n\nfunction resize(refCanvas) {\n  refCanvas.current.width = parseInt(\n    getComputedStyle(refCanvas.current.parentNode).getPropertyValue(\"width\")\n  );\n  refCanvas.current.height = parseInt(\n    getComputedStyle(refCanvas.current.parentNode).getPropertyValue(\"height\")\n  );\n}\n\nfunction Canvas({ history, dispatch }) {\n  const [state, setState] = useState({ mouseDown: false }),\n    handleEvent = (event) => {\n      switch (event.type) {\n        case \"mousedown\":\n          setState({ mouseDown: true });\n          return dispatch(opStart(refCanvas, event));\n        case \"mousemove\":\n          if (state.mouseDown) {\n            return dispatch(opContinue(refCanvas, event));\n          }\n          return;\n        case \"mouseup\":\n          return setState({ mouseDown: false });\n        default:\n          return console.log(event);\n      }\n    };\n\n  let refCanvas = useRef(null);\n\n  useEffect(() => {\n    resize(refCanvas);\n  });\n\n  useEffect(() => {\n    render(refCanvas, history);\n  });\n\n  return (\n    <canvas\n      ref={refCanvas}\n      onMouseUp={handleEvent}\n      onMouseMove={handleEvent}\n      onMouseDown={handleEvent}\n    ></canvas>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  history: state.history,\n});\n\nexport default connect(mapStateToProps, null)(Canvas);\n","import { OP_START, OP_CONTINUE, UNDO, REDO } from \"./actionTypes\";\n\nexport const opStart = (refCanvas, event) => ({\n  type: OP_START,\n  payload: {\n    x: event.pageX - refCanvas.current.offsetLeft,\n    y: event.pageY - refCanvas.current.offsetTop,\n  },\n});\n\nexport const opContinue = (refCanvas, event) => ({\n  type: OP_CONTINUE,\n  payload: {\n    x: event.pageX - refCanvas.current.offsetLeft,\n    y: event.pageY - refCanvas.current.offsetTop,\n  },\n});\n\nexport const undo = () => ({\n  type: UNDO,\n  payload: {},\n});\n\nexport const redo = () => ({\n  type: REDO,\n  payload: {},\n});\n","export const OP_START = \"op/start\";\nexport const OP_CONTINUE = \"op/continue\";\nexport const UNDO = \"undo\";\nexport const REDO = \"redo\";\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { connect } from \"react-redux\";\nimport { undo } from \"./../redux/actions\";\n\nfunction UndoButton({ history, dispatch, className }) {\n  return (\n    <Button\n      variant=\"contained\"\n      className={className}\n      disabled={history.length === 0}\n      onClick={() => {\n        dispatch(undo());\n      }}\n    >\n      Undo\n    </Button>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  history: state.history,\n});\n\nexport default connect(mapStateToProps, null)(UndoButton);\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { connect } from \"react-redux\";\nimport { redo } from \"./../redux/actions\";\n\nfunction UndoButton({ future, dispatch }) {\n  return (\n    <Button\n      variant=\"contained\"\n      disabled={future.length === 0}\n      onClick={() => {\n        dispatch(redo());\n      }}\n    >\n      Redo\n    </Button>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  future: state.future,\n});\n\nexport default connect(mapStateToProps, null)(UndoButton);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Card from \"@material-ui/core/Card\";\nimport Container from \"@material-ui/core/Container\";\nimport Canvas from \"./components/Canvas\";\nimport UndoButton from \"./components/UndoButton\";\nimport RedoButton from \"./components/RedoButton\";\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  content: {\n    flexGrow: 1,\n    height: \"100vh\",\n    overflow: \"auto\",\n  },\n  container: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n  canvas: {\n    height: \"70vh\",\n  },\n}));\n\nfunction App({ history, dispatch }) {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <AppBar position=\"relative\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            Redux Paint\n          </Typography>\n          <UndoButton className={classes.menuButton} />\n          <RedoButton className={classes.menuButton} />\n        </Toolbar>\n      </AppBar>\n      <main className={classes.content}>\n        <Container maxWidth=\"lg\" className={classes.container}>\n          <Card className={classes.canvas} raised={true}>\n            <Canvas />\n          </Card>\n        </Container>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","import { OP_START, OP_CONTINUE, UNDO, REDO } from \"./actionTypes\";\n\nfunction reduce(state = { history: [], future: [] }, action) {\n  switch (action.type) {\n    case OP_START:\n      return {\n        ...state,\n        future: [],\n        history: state.history.concat([\n          [{ x: action.payload.x, y: action.payload.y }],\n        ]),\n      };\n    case OP_CONTINUE:\n      var [last, ...rest] = state.history.slice().reverse();\n      return {\n        ...state,\n        future: [],\n        history: [\n          ...rest.slice().reverse(),\n          last.concat([{ x: action.payload.x, y: action.payload.y }]),\n        ],\n      };\n    case UNDO:\n      return {\n        ...state,\n        future: state.future.concat(state.history.slice(-1)),\n        history: state.history.slice(0, -1),\n      };\n    case REDO:\n      return {\n        ...state,\n        future: state.future.slice(0, -1),\n        history: state.history.slice().concat(state.future.slice(-1)),\n      };\n    default:\n      return state;\n  }\n}\n\nexport default reduce;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport reduce from \"./reduce\";\n\nconst store = configureStore({ reducer: reduce });\n\n// store.subscribe(() => console.log(store.getState()));\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}