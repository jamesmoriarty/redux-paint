{"version":3,"sources":["components/Canvas.js","redux/actions.js","redux/actionTypes.js","components/UndoButton.js","components/RedoButton.js","App.js","redux/reduce.js","redux/store.js","index.js"],"names":["connect","state","history","dispatch","refCanvas","useRef","useEffect","current","width","parseInt","getComputedStyle","parentNode","getPropertyValue","height","onMouseMove","event","type","payload","x","pageX","offsetLeft","y","pageY","offsetTop","lineNext","onMouseUp","removeEventListener","onMouseDown","lineStart","addEventListener","bindEventListeners","ctx","getContext","line","beginPath","moveTo","lineTo","stroke","drawLines","ref","className","Button","variant","disabled","length","onClick","future","useStyles","makeStyles","theme","title","flexGrow","menuButton","marginRight","spacing","content","overflow","container","paddingTop","paddingBottom","canvas","classes","AppBar","position","Toolbar","Typography","RedoButton","Container","maxWidth","Card","raised","reduce","action","concat","slice","reverse","last","rest","store","configureStore","reducer","subscribe","console","log","getState","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8515ea6a.chunk.js","sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { lineStart, lineNext } from \"./../redux/actions\";\n\nfunction bindEventListeners(refCanvas, dispatch) {\n  refCanvas.current.width = parseInt(\n    getComputedStyle(refCanvas.current.parentNode).getPropertyValue(\"width\")\n  );\n  refCanvas.current.height = parseInt(\n    getComputedStyle(refCanvas.current.parentNode).getPropertyValue(\"height\")\n  );\n\n  const onMouseMove = (event) => dispatch(lineNext(refCanvas, event));\n  const onMouseUp = (event) =>\n    refCanvas.current.removeEventListener(\"mousemove\", onMouseMove, false);\n  const onMouseDown = (event) => {\n    dispatch(lineStart(refCanvas, event));\n\n    refCanvas.current.addEventListener(\"mousemove\", onMouseMove, false);\n  };\n\n  refCanvas.current.addEventListener(\"mousedown\", onMouseDown, false);\n  refCanvas.current.addEventListener(\"mouseup\", onMouseUp, false);\n\n  return () => {\n    refCanvas.current.removeEventListener(\"mousemove\", onMouseMove, false);\n    refCanvas.current.removeEventListener(\"mouseup\", onMouseUp, false);\n    refCanvas.current.removeEventListener(\"mousedown\", onMouseDown, false);\n  };\n}\n\nfunction drawLines(refCanvas, history) {\n  // eslint-disable-next-line\n  refCanvas.current.width = refCanvas.current.width;\n\n  const ctx = refCanvas.current.getContext(\"2d\");\n\n  for (const line of history) {\n    const { x, y } = line[0];\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    for (const { x, y } of line) {\n      ctx.lineTo(x, y);\n      ctx.stroke();\n    }\n  }\n}\n\nfunction Canvas({ history, dispatch }) {\n  let refCanvas = useRef(null);\n\n  useEffect(() => {\n    return bindEventListeners(refCanvas, dispatch);\n  }, [dispatch]);\n\n  useEffect(() => {\n    drawLines(refCanvas, history);\n  });\n\n  return <canvas ref={refCanvas}></canvas>;\n}\n\nconst mapStateToProps = (state) => ({\n  history: state.history,\n});\n\nexport default connect(mapStateToProps, null)(Canvas);\n","import { LINE_START, LINE_NEXT, LINE_UNDO, LINE_REDO } from \"./actionTypes\";\n\nexport const lineStart = (refCanvas, event) => ({\n  type: LINE_START,\n  payload: {\n    x: event.pageX - refCanvas.current.offsetLeft,\n    y: event.pageY - refCanvas.current.offsetTop,\n  },\n});\n\nexport const lineNext = (refCanvas, event) => ({\n  type: LINE_NEXT,\n  payload: {\n    x: event.pageX - refCanvas.current.offsetLeft,\n    y: event.pageY - refCanvas.current.offsetTop,\n  },\n});\n\nexport const lineUndo = () => ({\n  type: LINE_UNDO,\n  payload: {},\n});\n\nexport const lineRedo = () => ({\n  type: LINE_REDO,\n  payload: {},\n});\n","export const LINE_START = \"line/start\";\nexport const LINE_NEXT = \"line/next\";\nexport const LINE_UNDO = \"line/undo\";\nexport const LINE_REDO = \"line/redo\";\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { connect } from \"react-redux\";\nimport { lineUndo } from \"./../redux/actions\";\n\nfunction UndoButton({ history, dispatch, className }) {\n  return (\n    <Button\n      variant=\"contained\"\n      className={className}\n      disabled={history.length === 0}\n      onClick={() => {\n        dispatch(lineUndo());\n      }}\n    >\n      Undo\n    </Button>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  history: state.history,\n});\n\nexport default connect(mapStateToProps, null)(UndoButton);\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { connect } from \"react-redux\";\nimport { lineRedo } from \"./../redux/actions\";\n\nfunction UndoButton({ future, dispatch }) {\n  return (\n    <Button\n      variant=\"contained\"\n      disabled={future.length === 0}\n      onClick={() => {\n        dispatch(lineRedo());\n      }}\n    >\n      Redo\n    </Button>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  future: state.future,\n});\n\nexport default connect(mapStateToProps, null)(UndoButton);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Card from \"@material-ui/core/Card\";\nimport Container from \"@material-ui/core/Container\";\nimport Canvas from \"./components/Canvas\";\nimport UndoButton from \"./components/UndoButton\";\nimport RedoButton from \"./components/RedoButton\";\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  content: {\n    flexGrow: 1,\n    height: \"100vh\",\n    overflow: \"auto\",\n  },\n  container: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n  canvas: {\n    height: \"70vh\",\n  },\n}));\n\nfunction App({ history, dispatch }) {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <AppBar position=\"relative\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            Redux Paint\n          </Typography>\n          <UndoButton className={classes.menuButton} />\n          <RedoButton className={classes.menuButton} />\n        </Toolbar>\n      </AppBar>\n      <main className={classes.content}>\n        <Container maxWidth=\"lg\" className={classes.container}>\n          <Card className={classes.canvas} raised={true}>\n            <Canvas />\n          </Card>\n        </Container>\n      </main>\n    </div>\n  );\n}\n\nexport default connect(null, null)(App);\n","import { LINE_START, LINE_NEXT, LINE_UNDO, LINE_REDO } from \"./actionTypes\";\n\nfunction reduce(state = { history: [], future: [] }, action) {\n  switch (action.type) {\n    case LINE_START:\n      return {\n        ...state,\n        future: [],\n        history: state.history.concat([\n          [{ x: action.payload.x, y: action.payload.y }],\n        ]),\n      };\n    case LINE_NEXT:\n      var [last, ...rest] = state.history.slice().reverse();\n      return {\n        ...state,\n        future: [],\n        history: [\n          ...rest.slice().reverse(),\n          last.concat([{ x: action.payload.x, y: action.payload.y }]),\n        ],\n      };\n    case LINE_UNDO:\n      return {\n        ...state,\n        future: state.future.concat(state.history.slice(-1)),\n        history: state.history.slice(0, -1),\n      };\n    case LINE_REDO:\n      return {\n        ...state,\n        future: state.future.slice(0, -1),\n        history: state.history.slice().concat(state.future.slice(-1)),\n      };\n    default:\n      return state;\n  }\n}\n\nexport default reduce;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport reduce from \"./reduce\";\n\nconst store = configureStore({ reducer: reduce });\n\nstore.subscribe(() => console.log(store.getState()));\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}