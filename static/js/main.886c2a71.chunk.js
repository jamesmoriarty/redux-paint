(this["webpackJsonpredux-paint"]=this["webpackJsonpredux-paint"]||[]).push([[0],{50:function(e,t,a){e.exports=a(61)},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),u=a(16),l=a(83),s=a(85),i=a(86),p=a(87),d=a(90),f=a(89),y=a(64),h=a(39),m=a.n(h),v=a(40),b=a.n(v),g=a(36),E=a.n(g),w=a(37),j=a.n(w),O=a(38),k=a.n(O),x=a(88),S=a(43),N=function(e){return{type:"op/opSetType",payload:{type:e}}},C=a(28),T=a(33);var B=Object(u.b)((function(e){return e}),null)((function(e){var t=e.history,a=e.dispatch,o=e.type,c=e.strokeStyle,u=Object(n.useState)({mouseDown:!1}),l=Object(S.a)(u,2),s=l[0],i=l[1],p=function(e){switch(o){case"rect":case"gesture":return function(e,t,n){switch(n.type){case"mousedown":return i({mouseDown:!0}),a(function(e,t,a,n){return{type:"op/create",payload:{type:e,strokeStyle:t,x:a,y:n}}}(e,t,n.pageX-d.current.offsetLeft,n.pageY-d.current.offsetTop));case"mousemove":return s.mouseDown?a((r=n.pageX-d.current.offsetLeft,o=n.pageY-d.current.offsetTop,{type:"op/update",payload:{x:r,y:o}})):void 0;case"mouseup":return i({mouseDown:!1});default:throw new Error("unknown event.type: ",n.type)}var r,o}(o,c,e);default:throw new Error("unknown op.type: ",o)}},d=Object(n.useRef)(null);return Object(n.useEffect)((function(){!function(e){e.current.width=parseInt(getComputedStyle(e.current.parentNode).getPropertyValue("width")),e.current.height=parseInt(getComputedStyle(e.current.parentNode).getPropertyValue("height"))}(d)})),Object(n.useEffect)((function(){!function(e,t){e.current.width=e.current.width;var a,n=e.current.getContext("2d"),r=Object(T.a)(t);try{for(r.s();!(a=r.n()).done;){var o=a.value,c=o[0],u=c.type,l=c.strokeStyle,s=c.x,i=c.y;switch(n.strokeStyle=l,n.fillStyle=l,u){case"rect":var p=o.slice().reverse(),d=Object(C.a)(p),f=d[0],y=f.x,h=f.y;d.slice(1);n.beginPath(),n.fillRect(s,i,-1*(s-y),-1*(i-h)),n.stroke();break;case"gesture":n.beginPath(),n.moveTo(s,i);var m,v=Object(T.a)(o);try{for(v.s();!(m=v.n()).done;){var b=m.value,g=b.x,E=b.y;n.lineTo(g,E),n.stroke()}}catch(w){v.e(w)}finally{v.f()}break;default:throw new Error("unknown op: ",o)}}}catch(w){r.e(w)}finally{r.f()}}(d,t)})),r.a.createElement("canvas",{ref:d,onMouseUp:p,onMouseMove:p,onMouseDown:p})})),D=Object(l.a)((function(e){return{title:{flexGrow:1},toolButtonGroup:{marginRight:e.spacing(2)},content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(12),paddingBottom:e.spacing(8)},canvas:{height:"70vh"}}}));var G=Object(u.b)((function(e){return e}),null)((function(e){var t=e.history,a=e.future,n=e.type,o=e.dispatch,c=D();return r.a.createElement("div",null,r.a.createElement(s.a,{position:"relative"},r.a.createElement(i.a,null,r.a.createElement(p.a,{variant:"h6",className:c.title},"Redux Paint"),r.a.createElement(x.a,{className:c.toolButtonGroup},r.a.createElement(y.a,{variant:"contained",color:"gesture"===n?"secondary":"default",onClick:function(){return o(N("gesture"))}},r.a.createElement(E.a,null)),r.a.createElement(y.a,{variant:"contained",disabled:!0},r.a.createElement(j.a,null)),r.a.createElement(y.a,{variant:"contained",color:"rect"===n?"secondary":"default",onClick:function(){return o(N("rect"))}},r.a.createElement(k.a,null))),r.a.createElement(x.a,{className:c.toolButtonGroup},r.a.createElement(y.a,{variant:"contained",disabled:0===t.length,onClick:function(){o({type:"undo",payload:{}})}},r.a.createElement(m.a,null)),r.a.createElement(y.a,{variant:"contained",disabled:0===a.length,onClick:function(){o({type:"redo",payload:{}})}},r.a.createElement(b.a,null))))),r.a.createElement("main",{className:c.content},r.a.createElement(f.a,{className:c.container},r.a.createElement(d.a,{className:c.canvas,raised:!0},r.a.createElement(B,null)))))})),M=a(41),P=a(42),R=a(12);var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"gesture",strokeStyle:"#333",history:[],future:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"op/opSetType":return Object(R.a)(Object(R.a)({},e),{},{type:t.payload.type});case"op/create":return Object(R.a)(Object(R.a)({},e),{},{future:[],history:e.history.concat([[t.payload]])});case"op/update":var a=e.history.slice().reverse(),n=Object(C.a)(a),r=n[0],o=n.slice(1);return Object(R.a)(Object(R.a)({},e),{},{future:[],history:[].concat(Object(P.a)(o.slice().reverse()),[r.concat([t.payload])])});case"undo":return Object(R.a)(Object(R.a)({},e),{},{future:e.future.concat(e.history.slice(-1)),history:e.history.slice(0,-1)});case"redo":return Object(R.a)(Object(R.a)({},e),{},{future:e.future.slice(0,-1),history:e.history.slice().concat(e.future.slice(-1))});default:return e}},J=Object(M.a)({reducer:I});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:J},r.a.createElement(G,null))),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.886c2a71.chunk.js.map