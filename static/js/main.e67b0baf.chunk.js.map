{"version":3,"sources":["redux/actionTypes.js","components/Canvas.js","redux/actions.js","components/UndoButton.js","components/RedoButton.js","App.js","redux/reduce.js","redux/store.js","index.js"],"names":["UNDO","REDO","connect","state","history","dispatch","refCanvas","useRef","useEffect","current","width","parseInt","getComputedStyle","parentNode","getPropertyValue","height","onMouseMove","event","type","payload","x","pageX","offsetLeft","y","pageY","offsetTop","opContinue","onMouseUp","removeEventListener","onMouseDown","opStart","addEventListener","bindEventListeners","ctx","getContext","line","beginPath","moveTo","lineTo","stroke","drawLines","ref","className","Button","variant","disabled","length","onClick","future","useStyles","makeStyles","theme","title","flexGrow","menuButton","marginRight","spacing","content","overflow","container","paddingTop","paddingBottom","canvas","App","classes","AppBar","position","Toolbar","Typography","RedoButton","Container","maxWidth","Card","raised","reduce","action","concat","slice","reverse","last","rest","store","configureStore","reducer","subscribe","console","log","getState","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e67b0baf.chunk.js","sourcesContent":["export const OP_START = \"line/start\";\nexport const OP_CONTINUE = \"line/next\";\nexport const UNDO = \"line/undo\";\nexport const REDO = \"line/redo\";\n","import React, { useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { opStart, opContinue } from \"./../redux/actions\";\n\nfunction bindEventListeners(refCanvas, dispatch) {\n  refCanvas.current.width = parseInt(\n    getComputedStyle(refCanvas.current.parentNode).getPropertyValue(\"width\")\n  );\n  refCanvas.current.height = parseInt(\n    getComputedStyle(refCanvas.current.parentNode).getPropertyValue(\"height\")\n  );\n\n  const onMouseMove = (event) => dispatch(opContinue(refCanvas, event));\n  const onMouseUp = (event) =>\n    refCanvas.current.removeEventListener(\"mousemove\", onMouseMove, false);\n  const onMouseDown = (event) => {\n    dispatch(opStart(refCanvas, event));\n\n    refCanvas.current.addEventListener(\"mousemove\", onMouseMove, false);\n  };\n\n  refCanvas.current.addEventListener(\"mousedown\", onMouseDown, false);\n  refCanvas.current.addEventListener(\"mouseup\", onMouseUp, false);\n\n  return () => {\n    refCanvas.current.removeEventListener(\"mousemove\", onMouseMove, false);\n    refCanvas.current.removeEventListener(\"mouseup\", onMouseUp, false);\n    refCanvas.current.removeEventListener(\"mousedown\", onMouseDown, false);\n  };\n}\n\nfunction drawLines(refCanvas, history) {\n  // eslint-disable-next-line\n  refCanvas.current.width = refCanvas.current.width;\n\n  const ctx = refCanvas.current.getContext(\"2d\");\n\n  for (const line of history) {\n    const { x, y } = line[0];\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    for (const { x, y } of line) {\n      ctx.lineTo(x, y);\n      ctx.stroke();\n    }\n  }\n}\n\nfunction Canvas({ history, dispatch }) {\n  let refCanvas = useRef(null);\n\n  useEffect(() => {\n    return bindEventListeners(refCanvas, dispatch);\n  }, [dispatch]);\n\n  useEffect(() => {\n    drawLines(refCanvas, history);\n  });\n\n  return <canvas ref={refCanvas}></canvas>;\n}\n\nconst mapStateToProps = (state) => ({\n  history: state.history,\n});\n\nexport default connect(mapStateToProps, null)(Canvas);\n","import { OP_START, OP_CONTINUE, UNDO, REDO } from \"./actionTypes\";\n\nexport const opStart = (refCanvas, event) => ({\n  type: OP_START,\n  payload: {\n    x: event.pageX - refCanvas.current.offsetLeft,\n    y: event.pageY - refCanvas.current.offsetTop,\n  },\n});\n\nexport const opContinue = (refCanvas, event) => ({\n  type: OP_CONTINUE,\n  payload: {\n    x: event.pageX - refCanvas.current.offsetLeft,\n    y: event.pageY - refCanvas.current.offsetTop,\n  },\n});\n\nexport const undo = () => ({\n  type: UNDO,\n  payload: {},\n});\n\nexport const redo = () => ({\n  type: REDO,\n  payload: {},\n});\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { connect } from \"react-redux\";\nimport { undo } from \"./../redux/actions\";\n\nfunction UndoButton({ history, dispatch, className }) {\n  return (\n    <Button\n      variant=\"contained\"\n      className={className}\n      disabled={history.length === 0}\n      onClick={() => {\n        dispatch(undo());\n      }}\n    >\n      Undo\n    </Button>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  history: state.history,\n});\n\nexport default connect(mapStateToProps, null)(UndoButton);\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { connect } from \"react-redux\";\nimport { redo } from \"./../redux/actions\";\n\nfunction UndoButton({ future, dispatch }) {\n  return (\n    <Button\n      variant=\"contained\"\n      disabled={future.length === 0}\n      onClick={() => {\n        dispatch(redo());\n      }}\n    >\n      Redo\n    </Button>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  future: state.future,\n});\n\nexport default connect(mapStateToProps, null)(UndoButton);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Card from \"@material-ui/core/Card\";\nimport Container from \"@material-ui/core/Container\";\nimport Canvas from \"./components/Canvas\";\nimport UndoButton from \"./components/UndoButton\";\nimport RedoButton from \"./components/RedoButton\";\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  content: {\n    flexGrow: 1,\n    height: \"100vh\",\n    overflow: \"auto\",\n  },\n  container: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n  canvas: {\n    height: \"70vh\",\n  },\n}));\n\nfunction App({ history, dispatch }) {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <AppBar position=\"relative\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            Redux Paint\n          </Typography>\n          <UndoButton className={classes.menuButton} />\n          <RedoButton className={classes.menuButton} />\n        </Toolbar>\n      </AppBar>\n      <main className={classes.content}>\n        <Container maxWidth=\"lg\" className={classes.container}>\n          <Card className={classes.canvas} raised={true}>\n            <Canvas />\n          </Card>\n        </Container>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","import { OP_START, OP_CONTINUE, UNDO, REDO } from \"./actionTypes\";\n\nfunction reduce(state = { history: [], future: [] }, action) {\n  switch (action.type) {\n    case OP_START:\n      return {\n        ...state,\n        future: [],\n        history: state.history.concat([\n          [{ x: action.payload.x, y: action.payload.y }],\n        ]),\n      };\n    case OP_CONTINUE:\n      var [last, ...rest] = state.history.slice().reverse();\n      return {\n        ...state,\n        future: [],\n        history: [\n          ...rest.slice().reverse(),\n          last.concat([{ x: action.payload.x, y: action.payload.y }]),\n        ],\n      };\n    case UNDO:\n      return {\n        ...state,\n        future: state.future.concat(state.history.slice(-1)),\n        history: state.history.slice(0, -1),\n      };\n    case REDO:\n      return {\n        ...state,\n        future: state.future.slice(0, -1),\n        history: state.history.slice().concat(state.future.slice(-1)),\n      };\n    default:\n      return state;\n  }\n}\n\nexport default reduce;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport reduce from \"./reduce\";\n\nconst store = configureStore({ reducer: reduce });\n\nstore.subscribe(() => console.log(store.getState()));\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}