(this["webpackJsonpredux-paint"]=this["webpackJsonpredux-paint"]||[]).push([[0],{132:function(e,t,a){e.exports=a(305)},305:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),c=a.n(o),l=a(24),u=a(327),i=a(329),s=a(330),p=a(331),d=a(334),y=a(333),f=a(308),m=a(122),h=a.n(m),v=a(123),b=a.n(v),E=a(119),g=a.n(E),j=a(120),k=a.n(j),O=a(121),w=a.n(O),x=a(118),C=a.n(x),S=a(332),P=a(59),N=function(e){return{type:"op/opSetType",payload:{type:e}}},T=a(55),B=a(79);var G=Object(l.b)((function(e){return e}),null)((function(e){var t=e.history,a=e.dispatch,o=e.type,c=e.strokeStyle,l=Object(n.useState)({mouseDown:!1}),u=Object(P.a)(l,2),i=u[0],s=u[1],p=function(e){switch(o){case"rect":case"gesture":return function(e,t,n){switch(n.type){case"mousedown":return s({mouseDown:!0}),a(function(e,t,a,n){return{type:"op/create",payload:{type:e,strokeStyle:t,x:a,y:n}}}(e,t,n.pageX-d.current.offsetLeft,n.pageY-d.current.offsetTop));case"mousemove":return i.mouseDown?a((r=n.pageX-d.current.offsetLeft,o=n.pageY-d.current.offsetTop,{type:"op/update",payload:{x:r,y:o}})):void 0;case"mouseup":return s({mouseDown:!1});default:throw new Error("unknown event.type: ",n.type)}var r,o}(o,c,e);default:throw new Error("unknown op.type: ",o)}},d=Object(n.useRef)(null);return Object(n.useEffect)((function(){!function(e){e.current.width=parseInt(getComputedStyle(e.current.parentNode).getPropertyValue("width")),e.current.height=parseInt(getComputedStyle(e.current.parentNode).getPropertyValue("height"))}(d)})),Object(n.useEffect)((function(){!function(e,t){e.current.width=e.current.width;var a,n=e.current.getContext("2d"),r=Object(B.a)(t);try{for(r.s();!(a=r.n()).done;){var o=a.value,c=o[0],l=c.type,u=c.strokeStyle,i=c.x,s=c.y;switch(n.strokeStyle=u,n.fillStyle=u,l){case"rect":var p=o.slice().reverse(),d=Object(T.a)(p),y=d[0],f=y.x,m=y.y;d.slice(1);n.beginPath(),n.fillRect(i,s,-1*(i-f),-1*(s-m)),n.stroke();break;case"gesture":n.beginPath(),n.moveTo(i,s);var h,v=Object(B.a)(o);try{for(v.s();!(h=v.n()).done;){var b=h.value,E=b.x,g=b.y;n.lineTo(E,g),n.stroke()}}catch(j){v.e(j)}finally{v.f()}break;default:throw new Error("unknown op: ",o)}}}catch(j){r.e(j)}finally{r.f()}}(d,t)})),r.a.createElement("canvas",{ref:d,onMouseUp:p,onMouseMove:p,onMouseDown:p})})),D=a(117);var M=Object(l.b)((function(e){return e}),null)((function(e){var t=e.children,a=e.dispatch,o=e.strokeStyle,c=Object(n.useState)({displayColorPicker:!1}),l=Object(P.a)(c,2),u=l[0],i=l[1];return r.a.createElement("div",null,r.a.cloneElement(t,{onClick:function(){i({displayColorPicker:!u.displayColorPicker})}}),u.displayColorPicker?r.a.createElement("div",{style:{marginTop:"5vh",position:"absolute",zIndex:"2"}},r.a.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:function(){i({displayColorPicker:!1})}}),r.a.createElement(D.ChromePicker,{color:o,onChangeComplete:function(e){a(function(e){return{type:"op/opSetColor",payload:{color:e}}}(e.hex))}})):null)})),I=Object(u.a)((function(e){return{title:{flexGrow:1},toolButtonGroup:{marginRight:e.spacing(2)},content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(12),paddingBottom:e.spacing(8)},canvas:{height:"70vh"}}}));var R=Object(l.b)((function(e){return e}),null)((function(e){var t=e.history,a=e.future,n=e.type,o=e.dispatch,c=e.strokeStyle,l=I();return r.a.createElement("div",null,r.a.createElement(i.a,{position:"relative"},r.a.createElement(s.a,null,r.a.createElement(p.a,{variant:"h6",className:l.title},"Redux Paint"),r.a.createElement(S.a,{className:l.toolButtonGroup},r.a.createElement(M,null,r.a.createElement(f.a,{variant:"contained"},r.a.createElement(C.a,{style:{color:c}})))),r.a.createElement(S.a,{className:l.toolButtonGroup},r.a.createElement(f.a,{variant:"contained",color:"gesture"===n?"secondary":"default",onClick:function(){return o(N("gesture"))}},r.a.createElement(g.a,null)),r.a.createElement(f.a,{variant:"contained",disabled:!0},r.a.createElement(k.a,null)),r.a.createElement(f.a,{variant:"contained",color:"rect"===n?"secondary":"default",onClick:function(){return o(N("rect"))}},r.a.createElement(w.a,null))),r.a.createElement(S.a,{className:l.toolButtonGroup},r.a.createElement(f.a,{variant:"contained",disabled:0===t.length,onClick:function(){o({type:"undo",payload:{}})}},r.a.createElement(h.a,null)),r.a.createElement(f.a,{variant:"contained",disabled:0===a.length,onClick:function(){o({type:"redo",payload:{}})}},r.a.createElement(b.a,null))))),r.a.createElement("main",{className:l.content},r.a.createElement(y.a,{className:l.container},r.a.createElement(d.a,{className:l.canvas,raised:!0},r.a.createElement(G,null)))))})),J=a(124),L=a(125),V=a(14);var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"gesture",strokeStyle:"#333",history:[],future:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"op/opSetType":return Object(V.a)(Object(V.a)({},e),{},{type:t.payload.type});case"op/opSetColor":return Object(V.a)(Object(V.a)({},e),{},{strokeStyle:t.payload.color});case"op/create":return Object(V.a)(Object(V.a)({},e),{},{future:[],history:e.history.concat([[t.payload]])});case"op/update":var a=e.history.slice().reverse(),n=Object(T.a)(a),r=n[0],o=n.slice(1);return Object(V.a)(Object(V.a)({},e),{},{future:[],history:[].concat(Object(L.a)(o.slice().reverse()),[r.concat([t.payload])])});case"undo":return Object(V.a)(Object(V.a)({},e),{},{future:e.future.concat(e.history.slice(-1)),history:e.history.slice(0,-1)});case"redo":return Object(V.a)(Object(V.a)({},e),{},{future:e.future.slice(0,-1),history:e.history.slice().concat(e.future.slice(-1))});default:return e}},Y=Object(J.a)({reducer:X});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:Y},r.a.createElement(R,null))),document.getElementById("root"))}},[[132,1,2]]]);
//# sourceMappingURL=main.e63da775.chunk.js.map